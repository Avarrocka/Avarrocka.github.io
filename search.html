<!DOCTYPE html>
<html>
	<head>
		<title> RuneSeeker - Search </title>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<!-- Latest compiled and minified JavaScript -->
		<script type="text/javascript" src="Scripts/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="Scripts/bootstrap.min.js"></script>
		<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.min.js"></script>
		<script>
            var graph;
            var xPadding = 35;
            var yPadding = 40;
            
            var data = { values:[
                { X: "Dec", Y: 889 },
                { X: "Jan", Y: 888 },
                { X: "Feb", Y: 1020 },
                { X: "Mar", Y: 904 },
                { X: "Apr", Y: 911 },
            ]};

            // Returns the max Y value in our data list
            function getMaxY() {
                var max = 0;
                
                for(var i = 0; i < data.values.length; i ++) {
                    if(data.values[i].Y > max) {
                        max = data.values[i].Y;
                    }
                }
                
                max += 50 - max % 10;
                return max;
            }
            
            // Return the x pixel for a graph point
            function getXPixel(val) {
                return ((graph.width() - xPadding) / data.values.length) * val + (xPadding * 1.5);
            }
            
            // Return the y pixel for a graph point
            function getYPixel(val) {
                return graph.height() - (((graph.height() - yPadding) / getMaxY()) * val) - yPadding;
            }

            $(document).ready(function() {
                graph = $('#graph');
                var c = graph[0].getContext('2d');            
                
                c.lineWidth = 2;
                c.strokeStyle = '#333';
                c.font = 'italic 8pt sans-serif';
                c.textAlign = "center";
                
                // Draw the axises
                c.beginPath();
                c.moveTo(xPadding, 0);
                c.lineTo(xPadding, graph.height() - yPadding);
                c.lineTo(graph.width(), graph.height() - yPadding);
                c.stroke();
                
                // Draw the X value texts
                for(var i = 0; i < data.values.length; i ++) {
                    c.fillText(data.values[i].X, getXPixel(i), graph.height() - yPadding + 20);
                }
                
                // Draw the Y value texts
                c.textAlign = "right"
                c.textBaseline = "middle";
                
                for(var i = 0; i < getMaxY(); i += 100) {
                    c.fillText(i, xPadding - 10, getYPixel(i));
                }
                
                c.strokeStyle = '#66ccff';
                
                // Draw the line graph
                c.beginPath();
                c.moveTo(getXPixel(0), getYPixel(data.values[0].Y));
                for(var i = 1; i < data.values.length; i ++) {
                    c.lineTo(getXPixel(i), getYPixel(data.values[i].Y));
                }
                c.stroke();
                
                // Draw the dots
                c.fillStyle = '#333';
                
                for(var i = 0; i < data.values.length; i ++) {  
                    c.beginPath();
                    c.arc(getXPixel(i), getYPixel(data.values[i].Y), 4, 0, Math.PI * 2, true);
                    c.fill();
                }
            });
        </script>
		<link href = "rs-styles.css" rel="stylesheet" type="text/css"/>
		<link rel="icon" type="image/png" sizes="32x32" href="/assets/runeseeker/rs-favicon.png">
	</head>
	<body>
		<header>
			<nav class="navbar navbar-default navbar-fixed-top">
			  <div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
				  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				  </button>
				  <a class="navbar-brand" href="runeseeker.html">RuneSeeker [BETA]</a>
				</div>
			  </div><!-- /.container-fluid -->
			</nav>
		</header>
		<div class="container vertical-center">
			<div class="jumbotron"> 
			  <h2>Item Database</h2>
			  <form class="navbar-form">
					Item Name: <input id="a" class="form-control" type='text' placeholder="Bronze Dagger" name='item_name' />
					<br>
					Item Type: &nbsp;&nbsp;<select class="form-control" name="item_type">
						<option value="0">Miscellaneous</option>
						<option value="1">Ammo</option>
						<option value="2">Arrows</option>
						<option value="3">Bolts</option>
						<option value="4">Construction materials</option>
						<option value="5">Construction projects</option>
						<option value="6">Cooking ingredients</option>
						<option value="7">Costumes</option>
						<option value="8">Crafting materials</option>
						<option value="9">Familiars</option>
						<option value="10">Farming produce</option>
						<option value="11">Fletching materials</option>
						<option value="12">Food and drink</option>
						<option value="13">Herblore materials</option>
						<option value="14">Hunting equipment</option>
						<option value="15">Hunting produce</option>
						<option value="16">Jewellery</option>
						<option value="17">Mage armour</option>
						<option value="18">Mage weapons</option>
						<option value="19">Melee armour - low level</option>
						<option value="20">Melee armour - mid level</option>
						<option value="21">Melee armour - high level</option>
						<option value="22">Melee weapons - low level</option>
						<option value="23">Melee weapons - mid level</option>
						<option value="24">Melee weapons - high level</option>
						<option value="25">Mining and smithing</option>
						<option value="26">Potions</option>
						<option value="27">Prayer armour</option>
						<option value="28">Prayer materials</option>
						<option value="29">Range armour</option>
						<option value="30">Range weapons</option>
						<option value="31">Runecrafting</option>
						<option value="32">Runes, Spells and Teleports</option>
						<option value="33">Seeds</option>
						<option value="34">Summoning scrolls</option>
						<option value="35">Tools and containers</option>
						<option value="36">Woodcutting product</option>
						<option value="37">Pocket items</option>
					</select>
					<br>
				<input type='button' class="btn btn-default" value='Search' onclick='displayFormContents(this.form);return false;' />
			</form>
			</div>
			<br>
			<div class="jumbotron jumbo-lite">
				<p> <img src="assets/runeseeker/cmp-icon.gif" class="resize"/> Compost mound pouch</p>
				<table>
				<tr>
					<td><strong>Type:</strong> Familiars &nbsp;&nbsp;&nbsp;&nbsp; </td>
					<td><strong>Members Only:</strong> <img src="http://vignette2.wikia.nocookie.net/runescape2/images/0/02/P2P_icon.png/revision/latest?cb=20160101093052" class="resize-small"/> &nbsp;&nbsp;&nbsp;&nbsp;</td>
					<td><strong>Tradable:</strong> Yes &nbsp;&nbsp;&nbsp;&nbsp; </td>
				</tr>
				<tr>
					<td><strong>High-Alch:</strong> 959 coins &nbsp;&nbsp;&nbsp;&nbsp; </td>
					<td><strong>Low-Alch:</strong> 639 coins &nbsp;&nbsp;&nbsp;&nbsp; </td>
					<td><strong>Store Price:</strong> N/A &nbsp;&nbsp;&nbsp;&nbsp; </td>
				</tr>
				<tr>
					<td><strong>Destroy:</strong> Drop &nbsp;&nbsp;&nbsp;&nbsp; </td>
					<td><strong>Protected:</strong> No &nbsp;&nbsp;&nbsp;&nbsp; </td>
					<td><strong>Weight:</strong> 0.0kg &nbsp;&nbsp;&nbsp;&nbsp; </td>
				</tr>
				</table>
				<br>
				
				<div class="well well-sm">
					<strong> Examine: </strong> <i>I can summon a compost mound familiar with this.</i>
				</div>
				<h4> <strong>Current GE Price:</strong> &nbsp; &nbsp; 951 coins </h4>
				<hr style="width: 100%; color: black; height: 1px; background-color:black;" />
				<strong> Trends </strong>
				<br><br><br>
				<canvas id="graph" width="400" height="250">   
				</canvas>
			</div>
		</div>
		<script>
			function displayFormContents(someForm) {
			var out = '';
				for (var i=0, el; el = someForm.elements[i]; i++) {
					if (el.name) {
						out += el.name + ' = ' + el.value + '\n';
					}
				}
			 alert(out);
			}
			var getJSON = function(url) {
			  return new Promise(function(resolve, reject) {
				var xhr = new XMLHttpRequest();
				xhr.open('get', url, true);
				xhr.responseType = 'json';
				xhr.onload = function() {
				  var status = xhr.status;
				  if (status == 200) {
					resolve(xhr.response);
				  } else {
					reject(status);
				  }
				};
				xhr.send();
			  });
			};
			getJSON('http://services.runescape.com/m=itemdb_rs/api/catalogue/items.json?category=9&alpha=c&page=1').then(function(data) {
				result.innerText = data.result; //display the result in an HTML element
			}, function(status) { //error detection....
			  alert('Something went wrong. Try checking the spelling of the item name!');
			});
		</script>
	</body>
</html>